# 🚀 AI求职助手 - 完整使用指南（从0到1）

## 📋 目录

1. [快速开始](#快速开始)
2. [详细安装步骤](#详细安装步骤)
3. [OpenClaw配置](#openclaw配置)
4. [使用教程](#使用教程)
5. [常见问题](#常见问题)
6. [故障排查](#故障排查)

---

## 🎯 快速开始（5分钟上手）

### 方式一：一键安装（推荐）

```bash
# 双击运行
一键安装.bat
```

### 方式二：手动安装

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 配置环境变量
copy env.example .env
# 编辑 .env，填入 DEEPSEEK_API_KEY

# 3. 启动服务
python web_app.py

# 4. 访问网站
# http://localhost:8000/app
```

---

## 📦 详细安装步骤

### 前置要求

- ✅ Python 3.8 或更高版本
- ✅ Chrome 浏览器（用于OpenClaw）
- ✅ DeepSeek API Key（[获取地址](https://platform.deepseek.com/api_keys)）

### 步骤1：安装Python依赖

```bash
pip install -r requirements.txt
```

**包含的核心依赖：**
- `fastapi` - Web框架
- `openai` - AI接口（兼容DeepSeek）
- `PyPDF2` - PDF解析
- `python-docx` - Word文档解析
- `pytesseract` - OCR图片识别
- `openclaw` - 浏览器自动化

### 步骤2：配置环境变量

1. 复制配置模板：
```bash
copy env.example .env
```

2. 编辑 `.env` 文件，填入必填项：

```env
# 必填：DeepSeek API密钥
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# 可选：岗位数据源（推荐openclaw）
JOB_DATA_PROVIDER=openclaw
```

**数据源选项说明：**

| 选项 | 说明 | 优点 | 缺点 |
|------|------|------|------|
| `openclaw` | 抓取Boss直聘真实岗位 | ✅ 真实数据<br>✅ 可直接投递 | ⚠️ 需要本机浏览器<br>⚠️ 需要手动Attach |
| `local` | 使用本地模拟数据 | ✅ 无需配置<br>✅ 快速演示 | ❌ 非真实数据<br>❌ 无法投递 |
| `jooble` | Jooble API | ✅ 国际岗位<br>✅ 稳定 | ⚠️ 需要API Key<br>⚠️ 国内岗位少 |
| `baidu` | 百度搜索 | ✅ 无需API Key | ❌ 结果质量低 |

### 步骤3：安装OpenClaw（可选但推荐）

**为什么需要OpenClaw？**
- 抓取Boss直聘、猎聘等真实招聘网站的岗位链接
- 自动化浏览器操作，节省手动搜索时间
- 获取可直接投递的岗位详情页链接

**安装步骤：**

```bash
# 1. 安装Python包
pip install openclaw

# 2. 安装Chrome扩展
openclaw browser install-extension

# 3. 重启Chrome浏览器
```

**验证安装：**

```bash
# 检查OpenClaw是否安装成功
openclaw --version

# 启动浏览器
openclaw browser start
```

---

## 🔧 OpenClaw配置（真实岗位抓取）

### 一次性配置（只需做一次）

#### 1️⃣ 启动OpenClaw浏览器

```bash
openclaw browser start
```

这会打开一个受OpenClaw控制的Chrome浏览器窗口。

#### 2️⃣ 登录Boss直聘

在打开的Chrome中：
1. 访问 https://www.zhipin.com
2. 登录您的Boss直聘账号（扫码或密码登录）
3. 保持登录状态

#### 3️⃣ 连接OpenClaw扩展

1. 点击Chrome右上角的 **OpenClaw扩展图标**（🔧拼图图标）
2. 在弹出的面板中点击 **"Attach"** 按钮
3. 看到 "✅ Connected" 提示即表示成功

**重要提示：**
- ✅ 连接一次后，只要不关闭浏览器就一直有效
- ✅ 可以最小化浏览器窗口，不影响使用
- ⚠️ 关闭浏览器后需要重新Attach

### 验证OpenClaw状态

访问健康检查接口：
```
http://localhost:8000/api/health
```

返回示例：
```json
{
  "status": "ok",
  "openclaw": {
    "available": true,
    "status": "ok",
    "message": "✅ OpenClaw已就绪，可以抓取Boss直聘岗位",
    "browser_connected": true,
    "tab_attached": true
  }
}
```

---

## 📖 使用教程

### 基础使用流程

#### 1. 启动服务

```bash
# 方式1：使用启动脚本
启动网站.bat

# 方式2：直接运行
python web_app.py
```

服务启动后会自动打开浏览器访问 `http://localhost:8000/app`

#### 2. 上传简历

**支持的格式：**
- 📄 PDF文件
- 📝 Word文档（.docx, .doc）
- 📋 纯文本（.txt）
- 🖼️ 图片（.jpg, .png）- 自动OCR识别

**上传方式：**
- 点击"上传简历文件"按钮选择文件
- 或直接在文本框中粘贴简历内容

#### 3. AI协作分析

点击"🚀 开始AI协作"后，6个AI角色会依次工作：

1. **👔 职业规划师** - 分析您的优势和定位
2. **🔍 招聘专家** - 搜索匹配的岗位
3. **✍️ 简历优化师** - 针对性改写简历
4. **✅ 质量检查官** - 审核并改进
5. **🎓 面试教练** - 提供面试辅导
6. **🎭 模拟面试官** - 模拟面试问答

**预计耗时：** 1-2分钟

#### 4. 查看结果

AI分析完成后，您会看到：

- 📊 **职业分析报告** - 优势、劣势、发展方向
- 🎯 **推荐岗位列表** - 匹配度排序的岗位
- ✍️ **优化后的简历** - 针对目标岗位优化
- 🎓 **面试准备指南** - 常见问题和回答技巧
- 🎭 **模拟面试问答** - 实战演练

#### 5. 搜索真实岗位（OpenClaw模式）

如果配置了OpenClaw，页面底部会自动显示"实时岗位搜索"区域：

1. 系统会根据您的简历自动填充搜索关键词
2. 点击"🔍 搜索Boss直聘岗位"
3. OpenClaw会自动打开Boss直聘搜索页
4. 抓取岗位详情链接并展示

**岗位列表包含：**
- 岗位标题
- 公司名称
- 薪资范围
- 工作地点
- 直达链接（点击跳转到Boss直聘投递）

#### 6. 投递简历

点击岗位列表中的"投递（跳转）"按钮：
- 自动打开Boss直聘岗位详情页
- 您可以在页面中手动点击"立即沟通"投递
- 系统会记录投递记录

---

## ❓ 常见问题

### Q1: 为什么选择OpenClaw而不是直接调用Boss直聘API？

**A:** Boss直聘等国内招聘网站通常：
- ❌ 不提供公开API
- ❌ 有严格的反爬虫机制
- ❌ 需要登录态和验证码

OpenClaw的优势：
- ✅ 使用您自己的浏览器和登录态
- ✅ 绕过验证码（因为是真实用户操作）
- ✅ 获取真实可投递的岗位链接
- ✅ 合法合规（使用自己的账号）

### Q2: OpenClaw安全吗？会不会泄露我的账号？

**A:** 完全安全：
- ✅ OpenClaw运行在您的本机
- ✅ 使用您自己的浏览器和登录态
- ✅ 不会上传任何账号信息到云端
- ✅ 开源项目，代码可审计

### Q3: 不使用OpenClaw可以吗？

**A:** 可以！有多种选择：

1. **本地模式**（演示用）
```env
JOB_DATA_PROVIDER=local
```
- 使用1000+模拟岗位数据
- 适合功能演示和测试

2. **Jooble API**（国际岗位）
```env
JOB_DATA_PROVIDER=jooble
JOOBLE_API_KEY=your_key
```

3. **百度搜索**（无需API Key）
```env
JOB_DATA_PROVIDER=baidu
```

### Q4: 为什么AI分析需要1-2分钟？

**A:** 因为使用了多AI协作架构：
- 6个AI角色依次工作
- 每个AI都会深度分析和生成内容
- 确保结果质量和准确性

**优化建议：**
- 使用更快的AI模型（如DeepSeek-V3）
- 调整并发参数（高级用户）

### Q5: 支持哪些招聘网站？

**当前支持（OpenClaw模式）：**
- ✅ Boss直聘（推荐，最稳定）
- ⚠️ 猎聘（实验性）
- ⚠️ 智联招聘（实验性）
- ⚠️ 前程无忧（实验性）

**配置方式：**
```env
OPENCLAW_JOB_SITES=boss,liepin,zhaopin,51job
```

**建议：** 只使用Boss直聘，其他网站可能不稳定。

---

## 🔧 故障排查

### 问题1: "OpenClaw未安装"

**症状：**
```
❌ OpenClaw未安装。请运行: pip install openclaw
```

**解决方案：**
```bash
pip install openclaw
```

### 问题2: "OpenClaw浏览器未连接标签页"

**症状：**
```
❌ OpenClaw 浏览器未连接标签页
```

**解决方案：**
1. 运行 `openclaw browser start`
2. 在Chrome中打开Boss直聘
3. 点击OpenClaw扩展图标
4. 点击"Attach"按钮

### 问题3: "DeepSeek API调用失败"

**症状：**
```
处理出错: API调用失败
```

**解决方案：**
1. 检查 `.env` 文件中的 `DEEPSEEK_API_KEY` 是否正确
2. 访问 https://platform.deepseek.com 检查API额度
3. 确认网络连接正常

### 问题4: PDF/Word文件解析失败

**症状：**
```
PDF解析失败 / Word文档解析失败
```

**解决方案：**
1. 确保文件未损坏
2. 如果是扫描版PDF，请上传图片格式（会自动OCR）
3. 或直接复制粘贴文本内容

### 问题5: 图片OCR识别失败

**症状：**
```
图片识别失败，未能提取到文字
```

**解决方案：**
1. 确保图片清晰可读
2. 安装Tesseract OCR引擎：
   - Windows: https://github.com/UB-Mannheim/tesseract/wiki
   - 下载安装后，添加到系统PATH
3. 或使用PDF/Word格式

### 问题6: 端口被占用

**症状：**
```
Address already in use: 8000
```

**解决方案：**
```bash
# 方式1：修改端口
# 编辑 .env 文件
PORT=8001

# 方式2：关闭占用端口的进程
netstat -ano | findstr :8000
taskkill /PID <进程ID> /F
```

### 问题7: OpenClaw扩展找不到

**症状：**
Chrome扩展栏没有OpenClaw图标

**解决方案：**
```bash
# 1. 手动安装扩展
openclaw browser install-extension

# 2. 或手动加载：
# - 打开 chrome://extensions/
# - 开启"开发者模式"
# - 点击"加载已解压的扩展程序"
# - 选择OpenClaw扩展目录
```

### 问题8: 搜索返回0个岗位

**可能原因：**
1. Boss直聘页面未加载完成
2. 搜索关键词太精确
3. OpenClaw未正确连接

**解决方案：**
1. 等待几秒后重新搜索
2. 调整搜索关键词（更宽泛）
3. 检查OpenClaw连接状态（访问 `/api/health`）

---

## 📊 性能优化建议

### 1. 加速AI分析

```env
# 使用更快的模型
DEEPSEEK_MODEL=deepseek-chat  # 默认，平衡速度和质量
# DEEPSEEK_MODEL=deepseek-coder  # 更快，适合技术岗位
```

### 2. 减少OpenClaw超时

```python
# 修改 openclaw_browser_provider.py
timeout_s = 30  # 默认90秒，可以改为30秒
```

### 3. 本地缓存岗位数据

系统会自动缓存OpenClaw抓取的岗位，避免重复搜索。

---

## 🎓 进阶使用

### 批量投递

```python
# 使用API批量投递
POST /api/jobs/batch_apply
{
  "job_ids": ["JOB001", "JOB002", "JOB003"],
  "resume_text": "...",
  "user_info": {"name": "张三", "email": "..."}
}
```

### 自定义AI提示词

编辑 `app/core/multi_ai_debate.py` 中的AI角色提示词，定制分析风格。

### 集成到自己的系统

```python
from app.core.market_driven_engine import market_driven_pipeline

# 调用AI分析
results = await market_driven_pipeline.process_resume(resume_text)
```

---

## 📞 获取帮助

- 📖 **文档中心**: `docs/`
- 🐛 **问题反馈**: GitHub Issues
- 💬 **技术交流**: [加入社区]

---

## 📝 更新日志

### v2.0 (2026-02-10)
- ✅ 集成OpenClaw浏览器自动化
- ✅ 支持Boss直聘真实岗位抓取
- ✅ 优化错误提示和健康检查
- ✅ 添加一键安装脚本
- ✅ 完善使用文档

### v1.0 (2026-01-15)
- ✅ 多AI协作引擎
- ✅ 市场驱动架构
- ✅ 支持PDF/Word/图片上传
- ✅ WebSocket实时进度

---

## 📄 许可证

MIT License - 自由使用和修改

---

**祝您求职顺利！🎉**

